:root{
      /* primary tunables - tweak these to change overall scaling */
      --bg:#F7F8FA; --card:#fff; --muted:#6b7280; --accent:#02008a;
      --sidebar-width:170px;
      --sidebar-collapsed-width:52px;
      --topbar-height:44px;

      /* bunker sizing (clamp will keep heights responsive) */
      --bunker-min-height:160px; --bunker-max-height:160px;
      --bunker-top-line-distance: 26px;
      --arrow-width: 3px;
      --bunker-arrow-height: 70px;
      --arrow-head-size: 12px;

      /* spacing */
      --app-gap:12px;
      --content-padding:12px;
    }

    /* --- Base layout: force app to exactly viewport height and remove page scroll --- */
    html, body {
      height:100%;
      margin:0;
      padding:0;
      width:100%;
      overflow-x:hidden;            /* no horizontal browser scroll */
      overflow-y:hidden;            /* remove vertical browser scroll */
      font-family:Inter, system-ui, Arial, sans-serif;
      background:var(--bg);
      color:#111;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* app fills viewport exactly; children must scale internally */
    .app {
      display:flex;
      height:100vh;                 /* lock to viewport */
      gap:var(--app-gap);
      box-sizing:border-box;
    }

    /* sidebar */
    .sidebar {
      width:var(--sidebar-width);
      background:#fff;
      border-right:1px solid rgba(0,0,0,0.04);
      padding:12px 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
      display:flex;
      flex-direction:column;
      gap:6px;
      box-sizing:border-box;
      flex-shrink:0;
      min-width:var(--sidebar-collapsed-width);
      overflow-y:auto;
      max-height:100vh;
      transition:width 220ms ease;
    }
    .sidebar.collapsed { width:var(--sidebar-collapsed-width); }

    .sidebar .title { font-weight:800; color:var(--accent); padding:8px 10px; font-size:13px; }
    .sidebar .item {
      display:flex;
      align-items:center;
      padding:8px 10px;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
      color:#111;
      font-size:13px;
      gap:8px;
      white-space:nowrap;
    }
    .sidebar .item:hover { background:rgba(2,0,138,0.05); }
    .sidebar .item.active { background:var(--accent); color:#fff; box-shadow:0 6px 18px rgba(2,0,138,0.12); }
    .sidebar .s-icon { width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center; background:rgba(2,0,138,0.06); border-radius:6px; font-weight:800; color:var(--accent); }
    .sidebar .s-label{ display:inline-block; }
    .sidebar.collapsed .s-label { display:none; }

    /* topbar fixed height */
    .topbar {
      height:var(--topbar-height);
      min-height:var(--topbar-height);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:0;
      flex-shrink:0;
    }
    .topbar .left{
      display:flex; align-items:center; gap:12px;
    }
    .topbar h1{ margin:0; font-size:16px; color:var(--accent); font-weight:800; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .controls{ display:flex; gap:8px; align-items:center; }
    .controls input{ padding:8px 10px; border-radius:8px; border:1px solid #e6e6e6; width:110px; font-size:14px; background:#fff; cursor:pointer; }

    /* hamburger */
    .hamburger{ width:42px; height:36px; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; border-radius:8px; }
    .hamburger:hover{ background:rgba(0,0,0,0.03); }
    .hamburger .lines{ width:18px; height:14px; position:relative; }
    .hamburger .lines span{ position:absolute; left:0; right:0; height:2px; background:#222; border-radius:2px; }
    .hamburger .lines span:nth-child(1){ top:0; }
    .hamburger .lines span:nth-child(2){ top:6px; }
    .hamburger .lines span:nth-child(3){ top:12px; }

    /* layout card becomes a column flex so inner parts can shrink/flow */
    .layout-card{
      background:var(--card);
      border-radius:12px;
      padding:12px;
      box-shadow:0 10px 30px rgba(2,8,23,0.06);
      position:relative;
      overflow:visible;
      display:flex;
      flex-direction:column;
      gap:12px;
      height: calc(100% - var(--topbar-height) - 12px); /* fill remaining main area */
      box-sizing:border-box;
    }

    /* the main row is flexible and will wrap on small heights/widths */
    .layout-row{
      display:flex;
      gap:12px;
      align-items:flex-start;
      flex:1 1 auto;
      min-height:0; /* allow children to shrink */
      flex-wrap:wrap; /* wrap if width is constrained */
    }

    .diagram-column{
      flex:1 1 0;
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:8px;
      min-height:0;
    }
    .stats-column{
      width:160px;
      flex-shrink:0;
      min-width:140px;
    }

    /* stats panel stays visible but will shrink its content */
    .stats-panel{
      width:100%;
      background:#02008a;
      color:#fff;
      padding:8px 10px;
      border-radius:8px;
      box-shadow:0 10px 22px rgba(2,8,23,0.10);
      display:flex;
      flex-direction:column;
      gap:6px;
      z-index:20;
      position:sticky;
      top: calc(var(--topbar-height) + 20px);
      font-size:13px;
    }
    .stat-row{ display:flex; justify-content:space-between; font-weight:700; }
    .stat-label{ opacity:0.95; font-weight:600; font-size:12px; color:rgba(255,255,255,0.95); }
    .stat-value{ font-weight:800; font-size:13px; }

    .diagram-inner { position:relative; padding:8px; min-height:0; display:flex; flex-direction:column; gap:8px; }

    .top-overlay { position: absolute; inset: 0 0 0 0; pointer-events: none; z-index: 90; }
    .top-line { position: absolute; top: var(--bunker-top-line-distance); left: 4%; right: 4%; height: 3px; background: #000; opacity:1; }

    .arrow { position: absolute; width: var(--arrow-width); background: #000; top: calc(var(--bunker-top-line-distance) + 4px); height: var(--bunker-arrow-height); transform-origin: top center; }
    .arrow::after { content: ''; position: absolute; left: calc(50% - 8px); top: 100%; width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: var(--arrow-head-size) solid #000; }

    /* bunkers grid: allow wrapping so it never forces page size bigger than viewport */
    .bunkers-grid{
      display:flex;
      gap:18px;
      align-items:end;
      padding:18px;
      flex-wrap:wrap;          /* <-- important: wrap to new line if not enough width */
      box-sizing:border-box;
      justify-content:space-between;
      width:100%;
    }

    /* bunker heights will scale within clamp to prevent overflow */
    .bunker{
      position:relative;
      flex:1 1 11%;            /* allow shrink/grow; base width ~11% for 8 columns */
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-end;
      min-width:120px;         /* prevents elements becoming too narrow */
      box-sizing:border-box;
      height: clamp(var(--bunker-min-height), 34vh, var(--bunker-max-height));
      max-height: calc(var(--bunker-max-height));
    }

    /* svg occupies available bunker height but is constrained */
    .bunker svg{ width:100%; height:100%; max-height:100%; display:block; object-fit:contain; }
    .bunker .label{ position:absolute; bottom:-15px; left:50%; transform:translateX(-50%); background:rgba(255,255,255,0.98); padding:6px 10px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.06); font-weight:700; font-size:13px; white-space:nowrap; }

    /* single-bunker view reduced sizes to avoid overflow */
    .single-bunker-wrap { padding:12px; display:flex; justify-content:center; align-items:flex-start; }
    .single-bunker {
      width:100%;
      max-width:920px;
      height: clamp(240px, 66vh, 720px);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-end;
      position:relative;
    }
    .single-bunker svg{ width:60%; height:92%; max-height:640px; display:block; }
    .single-bunker .label{ position: absolute; bottom:-30px; left:50%; transform:translateX(-50%); background:rgba(255,255,255,0.98); padding:8px 12px; border-radius:10px; font-weight:800; font-size:16px; white-space:nowrap; }

    /* tooltip */
    .coal-tooltip {
      position: absolute;
      pointer-events: none;
      background: #fff;
      color: #111;
      border: 1px solid rgba(0,0,0,0.12);
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      padding: 10px;
      border-radius: 8px;
      font-size: 13px;
      line-height:1.35;
      z-index: 2000;
      display: none;
      min-width: 160px;
    }

    /* ---------- Coal Flow boxes (UI only) ---------- */
    
    
    
    
    
    .coal-box .value { font-size:15px; }
    .coal-box .label { font-size:12px; color:var(--muted); font-weight:700; margin-top:4px; }
    .coal-box1 .value { font-size:15px; }
    .coal-box1 .label { font-size:12px; color:var(--muted); font-weight:700; margin-top:4px; }
    /* responsive: stack vertically on narrow screens and shrink heights */
    @media (max-width:1100px){
      .layout-row{ flex-direction:column; gap:10px; }
      .stats-column{ width:100%; order:2; }
      .sidebar{ display:none; } /* hide left sidebar on narrow screens to save space */
      .single-bunker svg{ width:80%; }
      
      
      .bunkers-grid { padding:8px; gap:10px; }
      .bunker { height: clamp(180px, 30vh, 380px); }
    }

    /* very short viewport (example: small laptop height) — make elements more compact */
    @media (max-height:720px){
      :root{
        --bunker-top-line-distance: 36px;
      }
      .bunker { height: clamp(160px, 36vh, 420px); }
      
      .topbar { height:56px; }
      .layout-card { padding:10px; }
    }

    /* ensure no element produces unintended browser scrollbar */
    * { box-sizing:border-box; }

    /* When in single-bunker mode we hide the stats-column and extra overview rows,
   and let the diagram column take the full width. */
.single-mode .stats-column {
  display: none !important;
}

.single-mode .diagram-column {
  flex: 1 1 100% !important;
  min-width: 0;
}

.single-mode .single-bunker svg {
  width: 90% !important;    /* make the single bunker svg wider */
  max-width: 1200px;
}

.single-mode #extraRowWrap,
.single-mode #extraRowGrid {
  display: none !important; /* extra row is hidden in single view just in case */
}

/* ----------------- add/replace these rules inside your <style> ----------------- */
.coal-flow-wrap .test{
  background: red;
  color: red;
}
/* topbar title replaced by requirement */
.topbar h1 {
  margin: 0;
  font-size: 16px;
  color: var(--accent);
  font-weight: 800;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* controls button styling (Refresh / Logout) */
.controls .btn {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #e6e6e6;
  background: #fff;
  font-weight: 700;
  cursor: pointer;
  font-size: 14px;
}
.controls .btn:hover{ box-shadow: 0 6px 18px rgba(2,8,23,0.06); }

/* --- make single-bunker use full card width (no artificial max-width) --- */
.single-bunker {
  width: 100%;
  max-width: none;            /* allow full width inside the diagram-column */
  padding: 6px 0;
  display: flex;
  flex-direction: column;
  align-items: stretch;       /* stretch full width */
  justify-content: center;
}

/* svg should occupy the full area available in single view */
.single-bunker svg {
  width: 100% !important;
  height: calc(100% - 48px) !important; /* leave space for the label */
  max-height: none !important;
  display: block;
  object-fit: contain;
}

/* when in single-mode make svg wider if previously overridden */
.single-mode .single-bunker svg {
  width: 100% !important;
}

/* label adjusted to remain centered and not push layout */
.single-bunker .label {
  position: relative;
  bottom: 0;
  margin-top: 8px;
  left: 0;
  transform: none;
  text-align: center;
  display: block;
}

/* ensure layout-card still fits viewport without scrolling */
.layout-card {
  height: calc(100% - var(--topbar-height) - 12px);
  overflow: hidden; /* prevent internal overflow creating scrollbars */
}

/* keep body overflow hidden (already present) to avoid page scroll */
html, body {
  overflow-x: hidden;
  overflow-y: hidden;
}
.logout-btn{
  background: red;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #e6e6e6;
  background: red;
  font-weight: 700;
  cursor: pointer;
  font-size: 14px;
  color: #F7F8FA;
}

/* ------------------ Make single view fill the diagram card but keep sidebar ------------------ */

/* Ensure the main layout keeps a flexible diagram column like overview */
.main, .content, .diagram-column {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;       /* take remaining space beside the sidebar */
  width: auto;
  max-width: none;
}

/* Make the container that holds the single view fill the diagram-column */
#singleView {
  display: block;
  width: 100%;
  max-width: none;
  margin: 0;           /* align with card edges */
  padding: 12px 18px;  /* breathing room inside the white card */
  box-sizing: border-box;
  background: transparent;
  box-shadow: none;
}

/* Single-bunker: expand to full available width inside the card */
.single-bunker {
  width: 100%;
  max-width: none;
  padding: 6px 0;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: stretch;   /* stretch the svg to full width */
  justify-content: center;
}

/* SVG should take full width of the single-bunker area and keep aspect ratio */
.single-bunker svg,
#singleSvg {
  width: 100% !important;
  height: auto !important; /* automatic height based on width and viewBox */
  max-height: calc(100vh - var(--topbar-height,64px) - 140px); /* keep it within viewport */
  display: block;
}

/* label below svg stays centered and doesn't affect svg size */
#singleLabel, .single-bunker .label {
  margin-top: 14px;
  text-align: center;
  font-weight: 800;
  font-size: 18px;
}

/* Make sure we do NOT hide or collapse the sidebar in single-mode:
   If you previously added rules hiding the sidebar, remove/comment them:
   e.g. remove/comment any rules like:
     body.single-mode .sidebar { display: none !important; width: 0 !important; }
   or
     .single-mode .diagram-column { width: 100% !important; }
*/

/* ----- Ensure stats panel stays visible and above diagram overlays ----- */
/* Put this near the end of your <style> inside input.html head */
.stats-panel {
  z-index: 999 !important;           /* keep it above top-overlay */
  position: sticky !important;       /* keep sticky behaviour */
  top: calc(var(--topbar-height) + 12px) !important;
}

/* Allow the layout-card to show sticky children (prevent clipping) */
.layout-card {
  overflow: visible !important;
}

/* Ensure stats-column is visible when not intentionally in single-mode */
.app:not(.single-mode) .stats-column {
  display: block !important;
}
/* ------------------ Keep stats panel at the right on desktop ------------------ */
/* Desktop: prevent layout-row wrapping so stats-column stays to the right */
@media (min-width: 1100px) {
  .layout-row {
    flex-wrap: nowrap;            /* prevent second-line wrapping */
    align-items: stretch;
    gap: 12px;
    min-height: 0;
  }

  /* Diagram column takes remaining space and can scroll internally if content is wide */
  .diagram-column {
    flex: 1 1 0;
    min-width: 0;                 /* allow it to shrink below content width */
    overflow: auto;               /* internal scroll if needed; won't push stats down */
    max-height: calc(100% - 0px);
  }

  /* Keep stats fixed width on the right (non-shrinking) */
  .stats-column {
    flex: 0 0 160px;              /* fixed width, won’t shrink below 160px */
    width: 160px;
    order: 2;                     /* ensure it's the right column */
  }

  /* Bunkers grid should live inside diagram-column and not force whole layout to grow */
  .bunkers-grid {
    box-sizing: border-box;
    flex: 1 1 auto;
    padding-right: 12px;          /* breathing room so right-most items don't hit stats */
    overflow:hidden;            /* internal wrapping of bunkers is still allowed */
  }
}

/* Preserve stacking behaviour on narrow screens (mobile/tablet) */
@media (max-width: 1099px) {
  .layout-row {
    flex-wrap: wrap;
  }
  .stats-column {
    width: 100%;
    order: 2;
    flex: 0 0 auto;
  }
  .diagram-column {
    width: 100%;
    order: 1;
    overflow: visible;
  }
}

/* ---------- Option B (scale-to-fit, no horizontal scroll) ---------- */
.bunkers-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
  gap: 12px;
  align-items: end;
  width: 100%;
}

/* ensure we try to keep 8 columns on larger screens */
@media (min-width: 1300px) {
  .bunkers-grid { grid-template-columns: repeat(8, 1fr); }
}

/* arrow centered inside each bunker */
.bunker .arrow,
.bunker > .arrow {
  left: 50%;
  transform: translateX(-50%);
  position: absolute;
  top: calc(var(--bunker-top-line-distance) + 4px);
}

/* ===== blinking timer styles (paste into your existing <style>) ===== */
@keyframes blink-red-white {
  0%   { background-color: #ffffff; color: #0b0b0b; }
  50%  { background-color: #ff4d4d; color: #ffffff; }
  100% { background-color: #ffffff; color: #0b0b0b; }
}

/* apply animation to the small value node so only timer blinks */
.coal-box .value.blinking {
  animation: blink-red-white 1s linear infinite;
  padding: 2px 6px;          /* small padding so background looks neat */
  border-radius: 6px;
  display: inline-block;     /* keep layout stable */
  box-shadow: 0 4px 12px rgba(255,77,77,0.08);
}

/* optional: a 'done' state styling */
.coal-box .value.done {
  background: #0ea5a0;       /* teal-ish when done */
  color: #fff;
  padding: 2px 6px;
  border-radius: 6px;
  display: inline-block;
}

/* UNIT BUTTON STYLING (Compact Version) */
#unitSelector {
  display: flex;
  gap: 6px;
  padding: 6px;
  justify-content: center;
}

.unit-btn {
  background-color: #1f2937; /* dark gray */
  color: #fff;
  border: 1.5px solid transparent;
  border-radius: 6px;
  padding: 4px 10px;        /* smaller padding */
  font-size: 13px;          /* smaller text */
  font-weight: 500;
  cursor: pointer;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0,0,0,0.15);
}

.unit-btn:hover {
  background-color: #374151; /* lighter gray */
  transform: translateY(-1px);
}

.unit-btn.active {
  background-color: #2563eb; /* blue highlight */
  border-color: #93c5fd;
  box-shadow: 0 0 6px rgba(37, 99, 235, 0.5);
  transform: translateY(-1px);
}

.coal-flow-wrap1 {
  background: linear-gradient(180deg, #fff, #12c115);
  border-radius: 16px;
  box-shadow: 0 10px 18px rgba(2,8,23,0.04);
  border: 1px solid #eaeef5;
  padding: 16px 16px;
  margin: 12px 0;
  min-width: 1100px;   /* Adjust to one value for ALL rows */
  max-width: 1100px;
  width: 1100px;
  height: 130px;       /* Set the SAME for all rows, increase if content overflows */
  display: flex;
  flex-direction: column;
  justify-content: center;
  box-sizing: border-box;
  overflow: visible;
  transition: box-shadow 0.13s;
}

/* minimal core (but still paste full style from input.html for exact parity) */
/* html, body { height:100%; margin:0; padding:0; width:100%; overflow-x:hidden; overflow-y:hidden; font-family:Inter, system-ui, Arial, sans-serif; background:#F7F8FA; color:#111; }
.app { display:flex; height:100vh; gap:12px; box-sizing:border-box; }
.sidebar { width:170px; background:#fff; border-right:1px solid rgba(0,0,0,0.04); padding:12px 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); display:flex; flex-direction:column; gap:6px; }
.bunkers-grid { display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; padding:12px; }
.bunker { background: #fff; border-radius: 10px; height: clamp(180px, 34vh, 420px); position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center; box-shadow: 0 6px 20px rgba(2,8,23,0.06); }
.single-bunker svg, .bunker svg { width:100%; height:auto; display:block; }
.coal-tooltip { position: absolute; pointer-events: none; z-index: 9999; display:none; } */

/* ---------- Improved Coal rows & boxes (replace existing .coal-flow-* and .coal-box* blocks) ---------- */
/* Use a contained grid so the card doesn't force page width */
.coal-flow-wrap {
  background: linear-gradient(180deg, #f7fbff,#ffffff );
  /*#f7fbff  #ffffff  */
  border-radius: 12px;
  padding: 14px;
  margin: 12px 0;
  box-shadow: 0 10px 30px rgba(2,8,23,0.04);
  border: 1px solid rgba(6,24,60,0.04);
  display: flex;
  flex-direction: column;
  gap: 10px;
  box-sizing: border-box;
  transition: transform .12s ease, box-shadow .12s ease;
}

/* title row */
.coal-flow-title {
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding:8px 12px;
  border-radius:10px;
  background: linear-gradient(180deg,#ffffff,#f0f6ff);
  color: var(--accent);
  font-weight:800;
  font-size:14px;
  box-shadow: 0 6px 18px rgba(2,0,138,0.06);
}

/* grid of boxes — responsive and consistent widths */
.coal-flow-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
  align-items: start;
  width: 100%;
  box-sizing: border-box;
  contain: layout; /* helps the browser optimize layout for this component */
}

/* base chip */
.coal-box {
  --chip-bg: #fff; /* default; can be overridden via inline CSS variable */
  background: var(--card);
  border-radius: 12px;
  min-width: 120px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:10px;
  gap:6px;
  box-shadow: 0 8px 20px rgba(6,24,60,0.04);
  border: 1px solid rgba(6,24,60,0.03);
  transition: transform .14s cubic-bezier(.2,.9,.2,1), box-shadow .14s ease;
  cursor: default;
  font-weight:700;
  font-size:13px;
}

/* hover / focus affordance */
.coal-box:hover,
.coal-box:focus {
  transform: translateY(-4px);
  box-shadow: 0 18px 40px rgba(6,24,60,0.08);
  z-index: 3;
}

/* value chip inside box */
.coal-box .value {
  font-size:16px;
  font-weight:800;
  padding:6px 10px;
  min-width:72px;
  border-radius:8px;
  text-align:center;
  white-space:nowrap;
  box-shadow: inset 0 -2px 6px rgba(0,0,0,0.03);
  background: linear-gradient(180deg,#fafafa,#fff);
  color: #111;
}

/* when a color is provided (React can set --chip-bg), use it */
.coal-box .value.colorized {
  background: linear-gradient(180deg, var(--chip-bg), color-mix(in srgb, var(--chip-bg) 75%, #000 5%));
  color: #fff;
  box-shadow: 0 6px 16px rgba(0,0,0,0.12);
}

/* smaller secondary value (used by coal-box1 generation number) */
.coal-box .value.small {
  font-size:13px;
  padding:5px 8px;
}

/* label under the value */
.coal-box .label {
  font-size:12px;
  color: var(--muted);
  font-weight:700;
  margin-top:4px;
  text-align:center;
  display:block;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  width:100%;
}

/* larger merged box (timer + gen) */
.coal-box1 {
  display:flex;
  flex-direction:column;
  gap:8px;
  align-items:center;
  justify-content:center;
  min-width:140px;
  padding:10px;
  border-radius:12px;
}

/* subtle blinking state (keeps previous animation behaviour) */
.coal-box .value.blink-red,
.coal-box1 .value.blink-red {
  animation: blink-red-white 1s linear infinite;
}

/* responsive tweaks */
@media (max-width: 1100px) {
  .coal-flow-grid { grid-template-columns: repeat(2, 1fr); gap:8px; }
  .coal-box { min-width: auto; width:100%; }
  .coal-box1 { min-width: auto; width:100%; }
}

/* ===== Unified Coal Rows (three rows look identical) ===== */

/* sizing tokens */
:root{
  --row-gap: 10px;
  --row-pad: 14px;
  --box-minw: 120px;
  --box-h: 84px;      /* coal-box height */
  --box1-h: 112px;    /* coal-box1 height (taller) */
  --chip-font: clamp(12px, 1vw, 16px);
  --label-font: clamp(11px, .9vw, 12px);
}

/* Ensure no page scroll is created by these rows */
.coal-rows-viewport {
  overflow: hidden;
  height: 100%;
  display: grid;
  grid-auto-rows: min-content;
  gap: var(--row-gap);
}

/* Row wrapper — SAME look for all rows */
.coal-flow-wrap,
.coal-flow-wrap1 {
  background: linear-gradient(180deg, #ffffff, #f7fbff);
  border-radius: 12px;
  padding: var(--row-pad);
  margin: 0;
  box-shadow: 0 10px 30px rgba(2,8,23,0.04);
  border: 1px solid rgba(6,24,60,0.04);
  display: flex;
  flex-direction: column;
  gap: var(--row-gap);
  box-sizing: border-box;
  width: 100%;
  max-width: 100%;
}

/* Optional title (kept same across rows) */
.coal-flow-title {
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding:8px 12px;
  border-radius:10px;
  background: linear-gradient(180deg,#ffffff,#f0f6ff);
  color: var(--accent);
  font-weight:800;
  font-size:14px;
  box-shadow: 0 6px 18px rgba(2,0,138,0.06);
}

/* Grid — same for all rows */
.coal-flow-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--box-minw), 1fr));
  gap: var(--row-gap);
  align-items: stretch;
  width: 100%;
  box-sizing: border-box;
}

/* Base card shared by both */
.coal-box,
.coal-box1 {
  --chip-bg:#fff;
  background: var(--card);
  border-radius: 12px;
  min-width: var(--box-minw);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:10px;
  gap:6px;
  box-shadow: 0 8px 20px rgba(6,24,60,0.04);
  border: 1px solid rgba(6,24,60,0.04);
  transition: transform .14s cubic-bezier(.2,.9,.2,1), box-shadow .14s ease;
  font-weight:700;
  font-size:13px;
}

/* Height only difference */
.coal-box   { height: var(--box-h); }
.coal-box1  { height: var(--box1-h); }

/* Hover affordance */
.coal-box:hover, .coal-box1:hover {
  transform: translateY(-3px);
  box-shadow: 0 18px 40px rgba(6,24,60,0.08);
}

/* Value + label identical across both */
.coal-box .value,
.coal-box1 .value {
  font-size: var(--chip-font);
  font-weight: 800;
  padding: 6px 10px;
  min-width: 72px;
  border-radius: 8px;
  text-align:center;
  white-space:nowrap;
  background: linear-gradient(180deg,#fafafa,#fff);
  color: #111;
  box-shadow: inset 0 -2px 6px rgba(0,0,0,0.03);
}
.coal-box .value.small,
.coal-box1 .value.small { font-size: clamp(11px,.9vw,13px); padding:5px 8px; }

.coal-box .label,
.coal-box1 .label {
  font-size: var(--label-font);
  color: var(--muted);
  font-weight:700;
  margin-top:4px;
  text-align:center;
  display:block;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  width:100%;
}

/* Colored chip support */
.coal-box .value.colorized,
.coal-box1 .value.colorized {
  background: linear-gradient(180deg, var(--chip-bg), color-mix(in srgb, var(--chip-bg) 75%, #000 6%));
  color:#fff;
  box-shadow: 0 6px 16px rgba(0,0,0,0.12);
}

/* Blink state kept */
.coal-box .value.blink-red,
.coal-box1 .value.blink-red { animation: blink-red-white 1s linear infinite; }

/* ===== Tablet & small screens ===== */
@media (min-width: 768px) and (max-width: 1100px){
  :root{ --box-h: 78px; --box1-h: 104px; }
  .coal-flow-grid { grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); gap: 8px; }
  .coal-flow-wrap, .coal-flow-wrap1 { padding: 12px; }
}

@media (max-width: 767px){
  :root{ --box-h: 72px; --box1-h: 96px; }
  .coal-flow-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
  .coal-flow-wrap, .coal-flow-wrap1 { padding: 10px; }
}

/* ===== No-Scroll Pack for the 3 Coal Rows =====
   Drop this AFTER your existing CSS. Apply class 'rows-no-scroll' to the parent
   that wraps the three rows (.coal-flow-wrap / .coal-flow-wrap1). It guarantees
   no page or internal scroll and keeps all three rows visually identical.
*/

/* 1) Make both wrappers identical */
.coal-flow-wrap1,
.coal-flow-wrap {
  background: linear-gradient(180deg, #1184f8,#ffffff ) !important;
  /* #1184f8 #fffff */
  border-radius: 12px !important;
  padding: 12px !important;
  margin: 0 !important;
  box-shadow: 0 10px 30px rgba(2,8,23,0.04) !important;
  border: 1px solid rgba(6,24,60,0.04) !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 10px !important;
  width: 100% !important;
  max-width: 100% !important;
  box-sizing: border-box !important;
}

.coal-flow-wrap1 {
  background: linear-gradient(180deg, #66e99d,#ffffff ) !important;
  /* #1184f8 #fffff */
  border-radius: 12px !important;
  padding: 12px !important;
  margin: 0 !important;
  box-shadow: 0 10px 30px rgba(2,8,23,0.04) !important;
  border: 1px solid rgba(6,24,60,0.04) !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 10px !important;
  width: 100% !important;
  max-width: 100% !important;
  box-sizing: border-box !important;
}

.coal-flow-wrap2 {
  background: linear-gradient(180deg, #daf65e,#ffffff ) !important;
  /* #1184f8 #fffff */
  border-radius: 12px !important;
  padding: 12px !important;
  margin: 0 !important;
  box-shadow: 0 10px 30px rgba(2,8,23,0.04) !important;
  border: 1px solid rgba(6,24,60,0.04) !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 10px !important;
  width: 100% !important;
  max-width: 100% !important;
  box-sizing: border-box !important;
}

/* 2) Single grid template for all rows */
.coal-flow-grid {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)) !important;
  gap: 10px !important;
  align-items: stretch !important;
  width: 100% !important;
}

/* 3) Boxes share same style; 1 is just taller */
:root{
  --box-h-min: 64px;
  --box-h-max: 84px;
  --box1-h-min: 80px;
  --box1-h-max: 112px;
  --chip-font: clamp(12px, 1vw, 16px);
  --label-font: clamp(11px, .9vw, 12px);
}
.coal-box,
.coal-box1{
  --chip-bg:#fff;
  background: var(--card, #fff) !important;
  border-radius: 12px !important;
  min-width: 110px !important;
  display:flex !important;
  flex-direction:column !important;
  align-items:center !important;
  justify-content:center !important;
  padding:10px !important;
  gap:6px !important;
  box-shadow: 0 8px 20px rgba(6,24,60,0.04) !important;
  border: 1px solid rgba(6,24,60,0.04) !important;
  font-weight:700 !important;
  font-size:13px !important;
}
.coal-box  { height: clamp(var(--box-h-min), 7vh, var(--box-h-max)) !important; }
.coal-box1 { height: clamp(var(--box1-h-min), 9vh, var(--box1-h-max)) !important; }

.coal-box .value,
.coal-box1 .value{
  font-size: var(--chip-font) !important;
  font-weight: 800 !important;
  padding: 6px 10px !important;
  min-width: 72px !important;
  border-radius: 8px !important;
  text-align:center !important;
  background: linear-gradient(180deg,#fafafa,#fff) !important;
  color: #111 !important;
  box-shadow: inset 0 -2px 6px rgba(0,0,0,0.03) !important;
  white-space: nowrap !important;
}
.coal-box .value.small,
.coal-box1 .value.small{ font-size: clamp(11px,.9vw,13px) !important; padding:5px 8px !important; }

.coal-box .label,
.coal-box1 .label{
  font-size: var(--label-font) !important;
  color: var(--muted, #6b7280) !important;
  font-weight:700 !important;
  margin-top:4px !important;
  text-align:center !important;
  display:block !important;
  white-space:nowrap !important;
  overflow:hidden !important;
  text-overflow:ellipsis !important;
  width:100% !important;
}
.coal-box .value.colorized,
.coal-box1 .value.colorized{
  background: linear-gradient(180deg, var(--chip-bg), color-mix(in srgb, var(--chip-bg) 75%, #000 6%)) !important;
  color:#fff !important;
}

/* 4) Force the rows area to fit in the viewport height with NO scroll */
.rows-no-scroll{
  /* total height available after topbar and surrounding padding. 
     Adjust the 96px value if your top area is taller/shorter. */
  --available-h: calc(100dvh - var(--topbar-height, 64px) - 32px);
  display: grid !important;
  grid-template-rows: 1fr 1fr 1fr !important; /* 3 equal rows */
  gap: 12px !important;
  height: var(--available-h) !important;
  overflow: clip !important;  /* no scrollbars */
}

/* Compress row decorations so they stay inside the row */
.rows-no-scroll .coal-flow-title{ padding:6px 8px !important; font-size: 13px !important; }
.rows-no-scroll .coal-flow-wrap,
.rows-no-scroll .coal-flow-wrap1{ padding: 10px !important; gap: 8px !important; }

/* 5) Short-height safety nets: reduce box heights and gaps further */
@media (max-height: 780px){
  :root{ --box-h-min: 58px; --box1-h-min: 72px; }
  .rows-no-scroll { gap: 10px !important; }
}
@media (max-height: 700px){
  :root{ --box-h-min: 52px; --box1-h-min: 66px; }
  .rows-no-scroll { gap: 8px !important; }
  .rows-no-scroll .coal-flow-title{ display:none !important; } /* hide titles if too short */
}

/* 6) Tablet width tweaks: keep many columns but avoid overflow */
@media (min-width:768px) and (max-width:1100px){
  .coal-flow-grid{ grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)) !important; gap: 8px !important; }
}
@media (max-width:767px){
  .coal-flow-grid{ grid-template-columns: repeat(2, 1fr) !important; gap: 8px !important; }
}

/* Ensure page itself never scrolls because of these rows */
html, body { overflow: hidden !important; }


/* =====================================================================================
   RESPONSIVE OVERRIDES (2025-11-05)
   These overrides keep the desktop layout intact while fixing breakage on tablets/phones.
   Place at the END of index.css so they win the cascade.
===================================================================================== */

/* 1) Restore vertical scroll on small screens; prefer dynamic viewport units */
@media (max-width: 1024px) {
  html, body {
    height: auto;
    min-height: 100dvh;
    overflow-y: auto !important;     /* override earlier hidden scroll */
  }
  .app {
    height: auto !important;
    min-height: 100dvh;
  }
}
@supports (height: 100dvh) {
  .app { height: 100dvh; }
}

/* 2) Sidebar: shrink instead of hide; keep labels trimmed */
@media (max-width: 1100px) {
  .sidebar {
    width: var(--sidebar-collapsed-width) !important;
  }
  .sidebar .s-label { display:none !important; }
}

/* 3) Fluid grids & wrappers */
.bunkers-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
  gap: 12px;
  align-items: end;
}
.single-bunker svg,
.single-bunker canvas,
.single-bunker img {
  max-width: 100%;
  height: auto;
}

/* Coal flow blocks: allow wrap and fluid width */
.coal-flow-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 10px;
}
@media (max-width:600px){
  .coal-flow-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
}
.coal-flow-wrap,
.coal-flow-wrap1 {
  min-width: 0 !important;
  max-width: 100% !important;
  width: 100% !important;
  height: auto;
  overflow: visible;
}

/* 4) Reduce global spacings via CSS variables at breakpoints */
@media (max-width: 1024px) {
  :root{
    --sidebar-width: 140px;
    --topbar-height: 40px;
    --app-gap: 10px;
    --content-padding: 10px;
    --bunker-min-height: 140px;
    --bunker-max-height: 180px;
    --bunker-top-line-distance: 24px;
    --bunker-arrow-height: 56px;
    --arrow-head-size: 10px;
  }
  .stats-column { min-width: 140px; }
}
@media (max-width: 600px) {
  :root{
    --sidebar-width: 120px;
    --topbar-height: 38px;
    --app-gap: 8px;
    --content-padding: 8px;
    --bunker-min-height: 120px;
    --bunker-max-height: 160px;
    --bunker-top-line-distance: 20px;
    --bunker-arrow-height: 48px;
    --arrow-head-size: 9px;
  }
  .layout-row { flex-direction: column; gap: 10px; }
  .stats-column { width: 100%; order: 2; }
  .diagram-column { width: 100%; order: 1; overflow: visible; }
}

/* 5) Safer responsive typography */
html { font-size: clamp(13px, 0.9vw + 0.2rem, 16px); }

/* 6) Never clip horizontally */
html, body { overflow-x: hidden; }
/* =========================================================
   iPad Air portrait tuning (≈768–900px)
   Paste at the very end of index.css
========================================================= */
@media (min-width:768px) and (max-width:900px){

  /* Scale global tokens a touch more for this width */
  :root{
    --sidebar-width: 132px;
    --sidebar-collapsed-width: 52px;
    --topbar-height: 40px;

    --app-gap: 10px;
    --content-padding: 10px;

    /* diagram/bunker sizes */
    --bunker-min-height: 135px;
    --bunker-max-height: 175px;
    --bunker-top-line-distance: 22px;
    --bunker-arrow-height: 52px;
    --arrow-head-size: 10px;
  }

  /* Keep sidebar present but slim */
  .sidebar{
    width: var(--sidebar-collapsed-width) !important;
  }
  .sidebar .s-label{ display:none !important; }

  /* Top bar spacing & button sizing */
  .topbar{ height: var(--topbar-height); }
  .topbar .title{ font-size: 15px; }
  .topbar .actions > *{
    padding: 6px 10px;
    font-size: 13px;
    line-height: 1.1;
  }

  /* Diagram: make sure the SVG scales and never overflows */
  .diagram-inner{
    padding: 8px;
    overflow: hidden;          /* prevent tiny scrollbars */
  }
  .diagram-inner svg,
  .diagram-inner canvas,
  .diagram-inner img{
    display: block;
    max-width: 100%;
    height: auto;
  }

  /* The three big sections: reduce inner padding so more fits on screen */
  .section-card,
  .coal-flow-wrap,
  .coal-flow-wrap1{
    padding: 10px !important;
  }

  /* Coal Flow & other mill grids:
     4-up layout on tablet keeps labels legible and avoids cramped layout */
  .coal-flow-grid{
    display: grid !important;
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    gap: 10px !important;
  }

  /* The small mill cards: keep a sensible min height and tighter text */
  .coal-box1,
  .coal-box{
    min-height: 58px;
  }
  .coal-box1 .value,
  .coal-box .value{ font-size: 16px; }
  .coal-box1 .label,
  .coal-box .label{ font-size: 12px; }

  /* Bunkers grid: 4 across feels right at ~820px */
  .bunkers-grid{
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    gap: 10px;
  }

  /* Stats column: keep it below the diagram on tablet */
  .layout-row{ flex-direction: column; gap: 12px; }
  .diagram-column, .stats-column{ width: 100%; }
  .stats-column{ order: 2; }
  .diagram-column{ order: 1; }

  /* Never clip horizontally at this breakpoint */
  html, body{ overflow-x: hidden; }
}

/* Optional: if iPad landscape feels a bit tight, nudge to 5 columns */
@media (min-width:901px) and (max-width:1024px){
  .coal-flow-grid{ grid-template-columns: repeat(5, minmax(0, 1fr)) !important; }
  .bunkers-grid{ grid-template-columns: repeat(5, minmax(0, 1fr)) !important; }
}
/* =========================================================
   Smooth downscale AFTER 1393px (bunkers + arrows + gaps)
   - Keeps everything exactly the same up to 1393px wide
   - For wider screens, sizes shrink smoothly as width grows
   - Won't shrink below ~72% so labels stay readable
========================================================= */
@media (min-width: 1394px) {
  :root{
    /* scale = 1 at 1393px; decreases as width grows; floor ≈ 0.72 */
    --desk-scale: clamp(0.72, calc(1393px / 100vw), 1);

    /* bunker sizing driven by the scale */
    --bunker-min-height: calc(160px * var(--desk-scale));
    --bunker-max-height: calc(200px * var(--desk-scale));
    --bunker-top-line-distance: calc(26px * var(--desk-scale));
    --bunker-arrow-height: calc(70px * var(--desk-scale));

    /* arrow cosmetics follow the same scale */
    --arrow-width: calc(3px * var(--desk-scale));
    --arrow-head-size: calc(12px * var(--desk-scale));

    /* optional: compact overall spacing a touch on ultra-wide */
    --app-gap: calc(12px * var(--desk-scale));
    --content-padding: calc(12px * var(--desk-scale));
  }

  /* Bunker cards: allow them to get a bit narrower on huge screens */
  .bunker{
    min-width: calc(120px * var(--desk-scale));
    height: clamp(var(--bunker-min-height), 34vh, var(--bunker-max-height));
  }

  /* Grid gaps and padding shrink with the same factor */
  .bunkers-grid{
    gap: calc(18px * var(--desk-scale));
    padding: calc(18px * var(--desk-scale));
  }

  /* Top horizontal line inside the diagram scales cleanly */
  .top-line{
    top: var(--bunker-top-line-distance);
    height: calc(3px * var(--desk-scale));
  }

  /* Arrow shaft width scales via --arrow-width, tip via --arrow-head-size */
  .arrow{
    width: var(--arrow-width);
    top: calc(var(--bunker-top-line-distance) + 4px);
    height: var(--bunker-arrow-height);
  }
  .arrow::after{
    /* keep the triangle perfectly centered while its size changes */
    left: calc(50% - (var(--arrow-head-size) / 2));
    border-left: calc(var(--arrow-head-size) / 2) solid transparent;
    border-right: calc(var(--arrow-head-size) / 2) solid transparent;
    border-top: var(--arrow-head-size) solid #000;
  }

  /* Coal rows also get proportional padding/gap (optional but nice) */
  .coal-flow-wrap,
  .coal-flow-wrap1{
    padding: calc(var(--content-padding) * 0.9) !important;
    gap: calc(var(--app-gap) * 0.9) !important;
  }

  /* Make sure SVGs don’t try to grow beyond their box while we’re downsizing */
  .bunker svg,
  .single-bunker svg{
    max-width: 100%;
    height: auto;
  }
}
/* =========================
   Responsive bunker + row fixes (paste at END of index.css)
   ========================= */

/* tunable: minimum bunker card width (adjust if you want larger thumbnails) */
:root{
  --bunker-min-width: 86px;   /* small phone */
  --bunker-mid-width: 110px;  /* tablet */
  --bunker-large-width: 120px;/* desktop fallback */
}

/* Make bunker grid fully fluid: let columns auto-fit and shrink */
.bunkers-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--bunker-min-width), 1fr));
  gap: 12px;
  align-items: end;
  width: 100%;
  box-sizing: border-box;
  padding: 12px; /* safe padding */
}

/* bunker card: allow shrink, smaller min-width and responsive base */
.bunker {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;

  /* flexible sizing: base width will try to be ~12% on wide screens but can shrink */
  flex: 1 1 clamp(var(--bunker-min-width), 11%, var(--bunker-large-width));
  min-width: var(--bunker-min-width);
  max-width: 1fr;
  height: clamp(var(--bunker-min-height), 30vh, var(--bunker-max-height));
}

/* Ensure bunker arrow stays centered and uses the CSS vars already in file */
.bunker .arrow,
.bunker > .arrow {
  left: 50%;
  transform: translateX(-50%);
  position: absolute;
  top: calc(var(--bunker-top-line-distance) + 4px);
}

/* svg scales to card width and respects aspect ratio */
.bunker svg,
.bunker canvas,
.bunker img {
  width: 100% !important;
  height: auto !important;
  display: block;
  max-width: 100%;
  object-fit: contain;
}

/* Single view svg safety */
.single-bunker svg,
#singleSvg {
  width: 100% !important;
  height: auto !important;
  max-height: calc(100vh - var(--topbar-height, 64px) - 140px);
}

/* Fix coal-flow-wrap1 fixed width (this was causing horizontal overflow) */
.coal-flow-wrap1 {
  min-width: 0 !important;
  max-width: 100% !important;
  width: 100% !important;
  box-sizing: border-box !important;
  overflow: visible !important;
}

/* In general make coal rows fluid */
.coal-flow-wrap,
.coal-flow-wrap1,
.coal-flow-wrap2 {
  min-width: 0 !important;
  max-width: 100% !important;
  width: 100% !important;
}

/* Coal flow inner grid fluid columns */
.coal-flow-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
  gap: 10px;
  align-items: start;
  width: 100%;
  box-sizing: border-box;
}

/* Media tweaks for tablet and phone so bunkers can shrink further */
@media (max-width: 1100px) {
  :root {
    --bunker-min-width: 96px;
  }
  .bunker { min-width: var(--bunker-min-width); flex: 1 1 calc(18%); }
  .sidebar { width: var(--sidebar-collapsed-width) !important; }
  .layout-row { flex-direction: column; gap: 10px; }
}

/* Phone: reduce even more */
@media (max-width: 600px) {
  :root{
    --bunker-min-width: 72px;
    --bunker-mid-width: 90px;
  }
  .bunkers-grid { grid-template-columns: repeat(auto-fit, minmax(var(--bunker-min-width), 1fr)); gap: 8px; padding: 8px; }
  .bunker { min-width: var(--bunker-min-width); flex: 1 1 100px; height: clamp(120px, 28vh, var(--bunker-max-height)); }
  .coal-box, .coal-box1 { min-width: 0; width: 100%; }
}

/* Slightly reduce gap on very narrow screens to avoid forced wrap */
@media (max-width: 420px) {
  .bunkers-grid { gap: 6px; }
  .coal-flow-grid { gap: 6px; }
}

/* If you still see overflow on some pages, this optional rule hides tiny rounding overflow */
html, body { overflow-x: hidden; }
/* ------------------------------
   Surgical responsive tweaks for coal flow boxes
   Paste this at the END of index.css
   ------------------------------ */

/* Prefer these selectors but also support a parent wrapper named "whole-coal-flow-grid" if present */
.whole-coal-flow-grid .coal-flow-grid,
.coal-flow-grid {
  /* make the grid tighter at small widths only via media queries below */
  align-items: stretch;
  box-sizing: border-box;
}

/* Desktop: no change (keep your existing settings) */

/* ===== Tablet-ish: reduce box width + height without touching titles ===== */
@media (max-width: 1100px) {
  /* make more compact columns but keep label legible */
  .coal-flow-grid {
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)) !important;
    gap: 8px !important;
  }

  /* let chips use full column width, reduce padding and height */
  .coal-box,
  .coal-box1 {
    min-width: 0 !important;       /* allow shrinking */
    width: 100% !important;        /* full column width */
    padding: 8px !important;
    box-shadow: 0 10px 22px rgba(6,24,60,0.04) !important;
    border-radius: 10px !important;
    font-size: 13px !important;
  }

  /* heights scale smoothly (coal-box smaller, coal-box1 slightly taller) */
  .coal-box  { height: clamp(60px, 8.5vh, 82px) !important; }
  .coal-box1 { height: clamp(80px, 11vh, 104px) !important; }

  /* value and label sizing — keep on one line but shrink text if needed */
  .coal-box .value,
  .coal-box1 .value {
    font-size: clamp(13px, 1.6vw, 16px) !important;
    padding: 6px 8px !important;
    min-width: 56px !important;
  }
  .coal-box .label,
  .coal-box1 .label {
    font-size: clamp(11px, 1.2vw, 12px) !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
}

/* ===== Narrow/tablet portrait: make the boxes even more compact ===== */
@media (max-width: 900px) {
  .coal-flow-grid {
    grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)) !important;
    gap: 6px !important;
  }
  .coal-box  { height: clamp(56px, 9vh, 74px) !important; }
  .coal-box1 { height: clamp(72px, 11vh, 96px) !important; }

  /* disable hover lift (mobile/touch) so layout remains stable */
  .coal-box:hover, .coal-box1:hover { transform: none !important; box-shadow: 0 10px 22px rgba(6,24,60,0.04) !important; }

  /* reduce padding & font more */
  .coal-box, .coal-box1 {
    padding: 6px !important;
    font-size: 12px !important;
  }
  .coal-box .value, .coal-box1 .value { font-size: clamp(12px, 2.2vw, 15px) !important; }
}

/* ===== Phone: 2 columns, compact heights ===== */
@media (max-width: 600px) {
  .coal-flow-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 6px !important;
  }

  .coal-box {
    height: clamp(48px, 10vh, 64px) !important;
    padding: 6px 6px !important;
  }
  .coal-box1 {
    height: clamp(64px, 12vh, 86px) !important;
    padding: 6px 6px !important;
  }

  .coal-box .label, .coal-box1 .label {
    font-size: 11px !important;
    white-space: nowrap !important;
  }

  /* ensure any embedded SVGs or images inside a chip don't push height */
  .coal-box svg, .coal-box img, .coal-box1 svg, .coal-box1 img {
    max-height: calc(100% - 8px) !important;
    height: auto !important;
    width: 100% !important;
    object-fit: contain !important;
  }
}

/* ===== Safety: ensure titles stay centered and don't float to the side ===== */
.coal-flow-title {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important; /* keep center on all breakpoints */
  gap: 8px !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}

/* ===== Avoid introducing new horizontal scrollbars ===== */
.coal-flow-wrap, .coal-flow-wrap1, .coal-flow-wrap2 {
  min-width: 0 !important;
  max-width: 100% !important;
  width: 100% !important;
  box-sizing: border-box !important;
}
